<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>PredictAI | Temperature Upload </title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
        <style>
            :root {
                --primary: #4361ee;
                --secondary: #3f37c9;
                --accent: #4895ef;
                --light: #f8f9fa;
                --dark: #212529;
                --success: #28a745;
                --warning: #ffc107;
                --recommended: linear-gradient(135deg, #43cea2, #185a9d);
                --form-bg: #f8f9fa;
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: linear-gradient(135deg, #f5f7fa 0%, #e4e7f1 100%);
                color: #333;
                min-height: 100vh;
                padding: 20px;
                background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23000000' fill-opacity='0.15' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E");
            }

            .prediction-container {
                max-width: 1200px;
                margin: 0 auto;
                background: white;
                border-radius: 20px;
                box-shadow: 0 15px 50px rgba(0, 0, 0, 0.1);
                overflow: hidden;
            }

            .header {
                background: var(--recommended);
                color: white;
                padding: 30px;
                text-align: center;
                position: relative;
            }

            .header::after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 8px;
                background: linear-gradient(90deg, #43cea2, #4361ee, #3f37c9);
            }

            .options-container {
                display: flex;
                flex-wrap: wrap;
                padding: 30px;
            }

            .option-card {
                flex: 1;
                min-width: 300px;
                margin: 15px;
                padding: 30px;
                border-radius: 15px;
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
                transition: all 0.3s;
                position: relative;
                overflow: hidden;
                background: white;
            }

            .recommended {
                border-top: 5px solid #43cea2;
            }

            .recommended-badge {
                position: absolute;
                top: 15px;
                right: -30px;
                background: #43cea2;
                color: white;
                padding: 5px 30px;
                transform: rotate(45deg);
                font-size: 14px;
                font-weight: bold;
            }

            .option-card h3 {
                font-size: 1.8rem;
                margin-bottom: 20px;
                color: var(--dark);
            }

            .option-card.recommended h3 {
                color: #185a9d;
            }

            .features-list {
                list-style: none;
                padding: 0;
                margin-bottom: 25px;
            }

            .features-list li {
                padding: 8px 0;
                display: flex;
                align-items: flex-start;
            }

            .features-list li i {
                color: var(--primary);
                margin-right: 10px;
                margin-top: 5px;
            }

            .accuracy-meter {
                height: 10px;
                background: #e9ecef;
                border-radius: 10px;
                margin: 20px 0;
                overflow: hidden;
            }

            .accuracy-fill {
                height: 100%;
                border-radius: 10px;
            }

            .manual-accuracy {
                width: 65%;
                background: var(--warning);
            }

            .auto-accuracy {
                width: 95%;
                background: var(--success);
            }

            .accuracy-labels {
                display: flex;
                justify-content: space-between;
                font-size: 0.9rem;
                color: #6c757d;
            }

            .btn-option {
                width: 100%;
                padding: 12px;
                font-size: 1.1rem;
                border-radius: 50px;
                transition: all 0.3s;
            }

            .form-container {
                padding: 30px;
                background: var(--form-bg);
                border-radius: 15px;
                margin-top: 20px;
                overflow: hidden;
                max-height: 0;
                opacity: 0;
                transition: all 0.5s ease;
            }

            .form-container.active {
                max-height: 1000px;
                opacity: 1;
                margin-top: 20px;
            }

            .result-card {
                background: white;
                border-radius: 15px;
                box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
                padding: 25px;
                margin-top: 30px;
                animation: fadeIn 0.5s ease-in-out;
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }

                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .weather-icon {
                font-size: 4rem;
                text-align: center;
                margin-bottom: 20px;
            }

            .temp-display {
                font-size: 3.5rem;
                font-weight: 700;
                text-align: center;
                color: var(--primary);
            }

            .weather-details {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
                margin-top: 20px;
            }

            .detail-card {
                background: #f1f8ff;
                border-radius: 10px;
                padding: 15px;
                text-align: center;
                animation: fadeIn 0.6s ease-in-out;
            }


            #manual-input-section {
                padding: 30px;
                display: none;
                animation: fadeIn 0.5s ease-in-out;
            }

            .upload-area {
                border: 2px dashed #4361ee;
                border-radius: 15px;
                padding: 40px;
                background: rgba(67, 97, 238, 0.05);
                transition: all 0.3s;
                text-align: center;
                margin-bottom: 30px;
                cursor: pointer;
            }

            .upload-area:hover {
                background: rgba(67, 97, 238, 0.1);
                border-color: #3f37c9;
            }

            .upload-area i {
                font-size: 3rem;
                color: #4361ee;
                margin-bottom: 15px;
            }

            .nav-tabs .nav-link {
                font-weight: 600;
                color: #6c757d;
                border: none;
                padding: 15px 25px;
                transition: all 0.3s;
            }

            .nav-tabs .nav-link.active {
                color: #4361ee;
                border-bottom: 3px solid #4361ee;
                background: transparent;
            }

            .nav-tabs {
                border-bottom: 1px solid #dee2e6;
                margin-bottom: 30px;
            }

            .feature-card {
                background: #f8f9fa;
                border-radius: 10px;
                padding: 20px;
                margin-bottom: 20px;
                transition: transform 0.3s;
            }

            .feature-card:hover {
                transform: translateY(-5px);
            }

            .feature-card i {
                color: #4361ee;
                font-size: 1.5rem;
                margin-bottom: 15px;
            }

            .manual-form-row {
                margin-bottom: 20px;
            }

            #manual-data-form .btn-lg {
                padding: 12px 30px;
                font-size: 1.1rem;
                margin-top: 20px;
                transition: all 0.3s;
            }

            #manual-data-form .btn-lg:hover {
                transform: scale(1.05);
            }

            .form-control {
                transition: all 0.3s;
            }

            .form-control:focus {
                border-color: #4361ee;
                box-shadow: 0 0 0 0.25rem rgba(67, 97, 238, 0.25);
            }

            .btn-option i {
                transition: transform 0.3s;
            }

            .btn-option.active i {
                transform: rotate(180deg);
            }

            .graph-container {
                background: white;
                border-radius: 15px;
                padding: 20px;
                margin-top: 30px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            }

            #loading {
                display: none;
                text-align: center;
                margin-top: 20px;
            }

            .alert-danger {
                border-radius: 10px;
                margin: 10px 0;
            }

            .alert-info {
                border-radius: 10px;
                margin: 10px 0;
            }

            .sample-template {
                font-size: 0.9rem;
                color: #6c757d;
                text-decoration: underline;
                display: block;
                margin-top: 10px;
            }

            footer {
                margin-top: 50px;
                text-align: center;
                color: #999;
                padding: 20px;
            }

            .predictai-title {
                font-weight: 700;
                font-size: 1.25rem;
                color: #000;
                /* Black color */
            }

            footer p {
                margin: 2px 0;
                line-height: 1.5;
            }

            @media (max-width: 768px) {
                .options-container {
                    flex-direction: column;
                }

                .upload-area {
                    padding: 20px;
                }

                .nav-tabs .nav-link {
                    padding: 10px 15px;
                    font-size: 0.9rem;
                }

                .temp-display {
                    font-size: 2.8rem;
                }
            }

            .feature-highlight {
                background: linear-gradient(120deg, #e0f7fa, #f5f5f5);
                border-radius: 15px;
                padding: 25px;
                margin: 20px 0;
                border-left: 4px solid var(--primary);
            }

            .prediction-graph {
                height: 200px;
                display: flex;
                align-items: flex-end;
                justify-content: space-around;
                margin-top: 30px;
                padding: 20px;
            }

            .graph-bar {
                width: 40px;
                background: var(--primary);
                border-radius: 8px 8px 0 0;
                position: relative;
                transition: height 0.5s ease;
            }

            .graph-bar-label {
                position: absolute;
                bottom: -30px;
                left: 0;
                width: 100%;
                text-align: center;
                font-size: 0.85rem;
            }

            .graph-bar-value {
                position: absolute;
                top: -25px;
                left: 0;
                width: 100%;
                text-align: center;
                font-weight: bold;
            }

            .predicted-bar {
                background: var(--success);
            }

            .main-header {
                width: 100%;
                background: transparent;
                padding: 0.5rem 2rem 1rem 2rem;

                display: flex;
                margin-top: 0;
                justify-content: space-between;
                align-items: center;
                font-family: 'Inter', sans-serif;
                border-bottom: 0px solid #ddd;
                margin-bottom: 0;
            }

            .header-left {
                display: flex;
                align-items: center;
                gap: 0.25rem;
                font-weight: 600;
                font-size: 1.5rem;
                margin-top: 0px;
                color: #000;
            }

            .logo-icon {
                font-size: 2rem;
                color: #0d6efd;
                top: 0px;
            }

            .header-right {
                display: flex;
                transform: translateX(-20px);
            }

            .header-right a {
                margin-left: 1.5rem;
                text-decoration: none;
                font-weight: 500;
                color: #333;
                position: relative;
                transition: color 0.3s ease;
            }

            .header-right a::after {
                content: '';
                position: absolute;
                bottom: -4px;
                left: 0;
                height: 2px;
                width: 100%;
                background-color: #0d6efd;
                transform: scaleX(0);
                transform-origin: left;
                transition: transform 0.3s ease;
            }

            .header-right a:hover,
            .header-right a.active {
                color: #0d6efd;
            }

            .header-right a:hover::after,
            .header-right a.active::after {
                transform: scaleX(1);
            }

            @keyframes shake {
                0% {
                    transform: translateX(0);
                }

                25% {
                    transform: translateX(-5px);
                }

                50% {
                    transform: translateX(5px);
                }

                75% {
                    transform: translateX(-5px);
                }

                100% {
                    transform: translateX(0);
                }
            }

            .input-error {
                border-color: red !important;
                animation: shake 0.3s;
            }

            .input-error-message {
                color: red;
                font-size: 0.85rem;
                margin-top: 4px;
            }
        </style>
    </head>

    <body>



        {% if error %}
            <div id="error-alert" class="alert alert-danger alert-dismissible fade show shadow-sm" role="alert" style="margin: 1rem auto; max-width: 900px;">
                <div class="d-flex align-items-center">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <div>
                        <strong>Error:</strong> {{ error }}
                    </div>
                </div>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            <script>
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
                const overlay = document.getElementById("loading-overlay");
                if (overlay) {
                    overlay.style.display = "none";
                }
            </script>
        {% endif %}


        <div class="prediction-container">

            <div class="header">
                <h1><i class="fas fa-temperature-high me-2"></i>Advanced Temperature Prediction</h1>
                <p class="lead">Upload temperature data or enter temperatures manually to predict tomorrow's weather</p>
            </div>


            <div class="options-container">

                <div class="option-card recommended">
                    <div class="recommended-badge">RECOMMENDED</div>
                    <h3>Automatic Prediction</h3>
                    <ul class="features-list">
                        <li><i class="fas fa-check-circle"></i> Highest accuracy prediction</li>
                        <li><i class="fas fa-check-circle"></i> Uses historical weather data</li>
                        <li><i class="fas fa-check-circle"></i> Machine learning algorithms</li>
                        <li><i class="fas fa-check-circle"></i> Real-time data integration</li>
                    </ul>

                    <div class="accuracy-meter">
                        <div class="accuracy-fill auto-accuracy"></div>
                    </div>
                    <div class="accuracy-labels">
                        <span>Low Accuracy</span>
                        <span>High Accuracy</span>
                    </div>

                    <form method="GET" action="{{ url_for('auto_predict') }}" class="mt-4">
                        <div class="mb-3">
                            <label class="form-label">Country</label>
                            <input type="text" name="country" class="form-control" placeholder="Enter country" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">City</label>
                            <input type="text" name="city" class="form-control" placeholder="Enter city" required>
                        </div>
                        <button type="submit" class="btn btn-primary btn-option">
                            <i class="fas fa-bolt me-2"></i> Predict Automatically
                        </button>
                    </form>
                    <script>
                        document.querySelector("form[action='{{ url_for('auto_predict') }}']").addEventListener("submit", function() {

                        });
                    </script>



                    <div class="feature-highlight mt-4">
                        <h4><i class="fas fa-lightbulb me-2"></i>How it works</h4>
                        <p>Our AI analyzes historical weather patterns for your location to provide the most accurate temperature prediction for tomorrow.</p>
                    </div>
                </div>

                >
                <div class="option-card">
                    <h3>Manual Prediction</h3>
                    <ul class="features-list">
                        <li><i class="fas fa-check-circle"></i> Custom temperature input</li>
                        <li><i class="fas fa-check-circle"></i> CSV file upload option</li>
                        <li><i class="fas fa-check-circle"></i> Quick prediction</li>
                        <li><i class="fas fa-check-circle"></i> Less accurate</li>
                    </ul>

                    <div class="accuracy-meter">
                        <div class="accuracy-fill manual-accuracy"></div>
                    </div>
                    <div class="accuracy-labels">
                        <span>Low Accuracy</span>
                        <span>High Accuracy</span>
                    </div>



                    <button class="btn btn-outline-primary btn-option mt-4" onclick="showManualSection()">
                        <i class="fas fa-sliders-h me-2"></i> Enter Manual Data
                    </button>

                    <div class="feature-highlight mt-4">
                        <h4><i class="fas fa-info-circle me-2"></i>How it Works</h4>
                        <p>To receive a prediction, you can either upload a CSV file containing the past 5 days of temperature data or manually enter the values.</p>
                    </div>
                </div>
            </div>


            <div id="manual-input-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2><i class="fas fa-tasks me-2"></i>Manual Prediction</h2>
                    <button class="btn btn-sm btn-outline-secondary" onclick="hideManualSection()">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>

                <ul class="nav nav-tabs" id="manualTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="upload-tab" data-bs-toggle="tab" data-bs-target="#upload" type="button" role="tab">
                            <i class="fas fa-file-upload me-2"></i>Upload CSV File
                        </button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="input-tab" data-bs-toggle="tab" data-bs-target="#input" type="button" role="tab">
                            <i class="fas fa-keyboard me-2"></i>Enter Temperatures Manually
                        </button>
                    </li>
                </ul>

                <div class="tab-content" id="manualTabContent">

                    <div class="tab-pane fade show active" id="upload" role="tabpanel">
                        <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <h4>Upload Temperature Data</h4>
                            <p class="text-muted">Click to select a CSV file or drag & drop it here</p>
                            <p class="small text-muted">Supported formats: CSV (max file size 5MB)</p>
                        </div>

                        <form method="POST" enctype="multipart/form-data">
                            <input type="file" id="fileInput" name="datafile" accept=".csv" class="d-none" required>
                            <div class="d-grid">
                                <button type="submit" name="upload" class="btn btn-primary btn-lg">
                                    <i class="fas fa-calculator me-2"></i> Process & Predict
                                </button>
                            </div>
                        </form>
                        <script>
                            document.getElementById("upload").addEventListener("submit", function() {
                                document.getElementById("loading-overlay").style.display = "flex";
                            });
                        </script>

                        <div class="text-center mt-4">
                            <a href="{{ url_for('static', filename='sample_temperature_data.csv') }}" class="sample-template" download>
                                <i class="fas fa-download me-1"></i> Download sample CSV template
                            </a>
                        </div>
                    </div>


                    <div class="tab-pane fade" id="input" role="tabpanel">
                        <form method="POST" id="manual-data-form">
                            <div class="row manual-form-row">
                                <div class="col-md-6">
                                    <label class="form-label">Today's Temperature (°C)</label>
                                    <input type="number" step="any" name="temp1" class="form-control" placeholder="Enter temperature" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Yesterday's Temperature (°C)</label>
                                    <input type="number" step="any" name="temp2" class="form-control" placeholder="Enter temperature" required>
                                </div>
                            </div>

                            <div class="row manual-form-row">
                                <div class="col-md-6">
                                    <label class="form-label">2 Days Ago (°C)</label>
                                    <input type="number" step="any" name="temp3" class="form-control" placeholder="Enter temperature" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">3 Days Ago (°C)</label>
                                    <input type="number" step="any" name="temp4" class="form-control" placeholder="Enter temperature" required>
                                </div>
                            </div>

                            <div class="row manual-form-row">
                                <div class="col-md-6">
                                    <label class="form-label">4 Days Ago (°C)</label>
                                    <input type="number" step="any" name="temp5" class="form-control" placeholder="Enter temperature" required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">5 Days Ago (°C) <span class="text-muted">(Optional)</span></label>
                                    <input type="number" step="any" name="temp6" class="form-control" placeholder="Enter temperature">
                                </div>
                            </div>

                            <div class="d-grid">
                                <button type="submit" name="manual" class="btn btn-warning btn-lg">
                                    <i class="fas fa-bolt me-2"></i> Predict Temperature
                                </button>
                            </div>
                        </form>
                    </div>
                </div>


                <div class="row mt-4">
                    <div class="col-md-4">
                        <div class="feature-card">
                            <i class="fas fa-cogs"></i>
                            <h6>Automatic Processing</h6>
                            <p>Data will be validated and processed automatically</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-card">
                            <i class="fas fa-cloud-sun"></i>
                            <h6>Weather Integration</h6>
                            <p>Uploaded data will be enhanced with weather analytics</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="feature-card">
                            <i class="fas fa-chart-line"></i>
                            <h6>Advanced Analytics</h6>
                            <p>Get insights from your temperature data</p>
                        </div>
                    </div>
                </div>
            </div>






            <footer>
                <p class="predictai-title mb-1">PredictAI</p>
                <p>Made by <strong>Muhammad Abdullah Awan</strong> &copy; 2025</p>
            </footer>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            function showManualSection() {
                document.getElementById('manual-input-section').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('manual-input-section').scrollIntoView({
                        behavior: 'smooth'
                    });
                }, 100);
            }


            function hideManualSection() {
                document.getElementById('manual-input-section').style.display = 'none';
            }


            function showLoading() {
                document.getElementById('loading').style.display = 'block';
            }


            window.addEventListener('load', () => {
                document.getElementById('loading').style.display = 'none';
            });


            const uploadArea = document.querySelector('.upload-area');
            const fileInput = document.getElementById('fileInput');

            if (uploadArea && fileInput) {

                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.style.borderColor = '#3f37c9';
                    uploadArea.style.backgroundColor = 'rgba(67, 97, 238, 0.15)';
                });


                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.style.borderColor = '#4361ee';
                    uploadArea.style.backgroundColor = 'rgba(67, 97, 238, 0.05)';
                });


                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    fileInput.files = e.dataTransfer.files;

                    if (fileInput.files.length > 0) {
                        uploadArea.querySelector('h4').textContent = fileInput.files[0].name;
                        uploadArea.querySelector('p').textContent = 'Click to change file';
                    }
                });


                fileInput.addEventListener('change', () => {
                    if (fileInput.files.length > 0) {
                        uploadArea.querySelector('h4').textContent = fileInput.files[0].name;
                        uploadArea.querySelector('p').textContent = 'Click to change file';
                    }
                });
            }
        </script>


        <script>
            document.getElementById("manual-data-form").addEventListener("submit", function(e) {
                let formValid = true;


                document.querySelectorAll(".input-error-message").forEach(el => el.remove());
                document.querySelectorAll(".form-control").forEach(el => el.classList.remove("input-error"));


                const inputs = this.querySelectorAll("input[required]");

                inputs.forEach(input => {
                    const value = parseFloat(input.value);
                    if (isNaN(value) || value <= 0) {
                        formValid = false;


                        input.classList.add("input-error");
                        const errorMsg = document.createElement("div");
                        errorMsg.classList.add("input-error-message");
                        errorMsg.innerText = "Only positive numeric values allowed.";
                        input.parentNode.appendChild(errorMsg);


                        if (!document.querySelector(".input-error:focus")) {
                            input.focus();
                            input.scrollIntoView({
                                behavior: "smooth",
                                block: "center"
                            });
                        }
                    }
                });

                if (!formValid) {
                    e.preventDefault();
                }
            });
        </script>


        <div id="loading-overlay" style="display: none; position: fixed; z-index: 9999; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.8); backdrop-filter: blur(2px); justify-content: center; align-items: center;">
            <div class="spinner-border text-warning" style="width: 3rem; height: 3rem;" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

    </body>

</html>
